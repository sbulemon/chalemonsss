<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSINT Lookup with Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-search"></i> OSINT BY @sbulemon</h1>
        
        <div class="button-group">
            <h2>Трекер</h2>
            <button id="createTrackerBtn"><i class="fas fa-eye"></i> Создать трекер</button>
            <button id="viewLogsBtn"><i class="fas fa-file-alt"></i> Логи трекера</button>
        </div>

        <div id="trackerSection" class="section hidden">
            <div class="input-group">
                <i class="fas fa-eye"></i>
                <button id="generateLinkBtn">Сгенерировать ссылку</button>
            </div>
            <div id="trackerResult" class="result-card"></div>
        </div>

        <div id="logsSection" class="section hidden">
            <div class="input-group">
                <i class="fas fa-search"></i>
                <input type="text" id="logFilter" placeholder="Поиск по логам...">
                <button id="clearLogsBtn">Очистить логи</button>
                <button id="exportLogsBtn">Экспорт логов (JSON)</button>
            </div>
            <div id="trackerLogOutput" class="result-card"></div>
        </div>
        
        <footer>
            <a href="https://t.me/lemon_tool" target="_blank"><i class="fab fa-telegram"></i></a>
        </footer>
    </div>

    <style>
        :root {
            --primary-green: #33ff33;
            --secondary-green: #00cc00;
            --hover-green: #66ff66;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #0d1117, #1a1f2b);
            color: #ffffff;
            padding: 20px;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px;
            background: rgba(22, 27, 34, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 255, 0, 0.1);
        }

        h1 {
            font-size: 2.5em;
            text-align: center;
            color: var(--primary-green);
            margin-bottom: 30px;
        }

        .button-group {
            margin-bottom: 20px;
        }

        .button-group h2 {
            color: var(--primary-green);
            font-size: 1.2em;
            margin: 15px 0 5px;
        }

        .button-group button {
            padding: 12px 20px;
            background: linear-gradient(45deg, var(--primary-green), var(--secondary-green));
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
        }

        .button-group button:hover {
            background: var(--hover-green);
        }

        .section {
            margin: 20px 0;
            padding: 20px;
            background: #1e252d;
            border-radius: 10px;
        }

        .hidden {
            display: none;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #2e3642;
            padding: 5px;
            border-radius: 8px;
            border: 2px solid var(--primary-green);
        }

        .input-group i {
            padding: 10px;
            color: var(--primary-green);
        }

        .input-group input {
            flex: 1;
            padding: 10px;
            background: transparent;
            border: none;
            color: #fff;
            outline: none;
        }

        .input-group button {
            padding: 10px 15px;
            background: var(--primary-green);
            border-radius: 5px;
            border: none;
            cursor: pointer;
            color: #000;
        }

        .result-card {
            padding: 15px;
            background: #252c36;
            border-radius: 8px;
            margin-top: 15px;
            font-family: monospace;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
        }

        .result-card strong {
            color: var(--primary-green);
        }

        footer {
            margin-top: 30px;
            text-align: center;
        }

        footer a {
            color: var(--primary-green);
            font-size: 1.5em;
        }
    </style>

    <script>
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            let trackerLogs = JSON.parse(localStorage.getItem('trackerLogs')) || [];

            // Элементы DOM
            const createTrackerBtn = document.getElementById('createTrackerBtn');
            const viewLogsBtn = document.getElementById('viewLogsBtn');
            const generateLinkBtn = document.getElementById('generateLinkBtn');
            const clearLogsBtn = document.getElementById('clearLogsBtn');
            const exportLogsBtn = document.getElementById('exportLogsBtn');
            const logFilter = document.getElementById('logFilter');
            const trackerSection = document.getElementById('trackerSection');
            const logsSection = document.getElementById('logsSection');
            const trackerResult = document.getElementById('trackerResult');
            const trackerLogOutput = document.getElementById('trackerLogOutput');

            // Функции
            function toggleSection(sectionToShow) {
                if (sectionToShow === 'tracker') {
                    trackerSection.classList.remove('hidden');
                    logsSection.classList.add('hidden');
                } else if (sectionToShow === 'logs') {
                    logsSection.classList.remove('hidden');
                    trackerSection.classList.add('hidden');
                }
            }

            function generateTrackerLink() {
                const trackerId = Math.random().toString(36).substring(2, 15);
                const currentUrl = window.location.href.split('?')[0];
                const trackerUrl = `${currentUrl}?tracker=${trackerId}`;
                trackerResult.innerHTML = `
                    <p><strong>Ваша ссылка:</strong> <a href="${trackerUrl}" target="_blank">${trackerUrl}</a></p>
                    <p>Отправьте эту ссылку, чтобы собрать данные.</p>
                `;
                alert('Ссылка сгенерирована!');
            }

            function updateTrackerLogDisplay(logs = trackerLogs) {
                trackerLogOutput.innerHTML = '';
                logs.forEach(log => {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <p><strong>ID:</strong> ${log.trackerId}</p>
                        <p><strong>Время:</strong> ${log.timestamp}</p>
                        <p><strong>IP:</strong> ${log.ip}</p>
                    `;
                    trackerLogOutput.appendChild(div);
                });
            }

            function filterLogs() {
                const filter = logFilter.value.toLowerCase();
                const filteredLogs = trackerLogs.filter(log => 
                    log.trackerId.toLowerCase().includes(filter) ||
                    log.ip.toLowerCase().includes(filter)
                );
                updateTrackerLogDisplay(filteredLogs);
            }

            function clearTrackerLogs() {
                trackerLogs = [];
                localStorage.removeItem('trackerLogs');
                updateTrackerLogDisplay();
                alert('Логи очищены!');
            }

            function exportLogs() {
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(trackerLogs, null, 2));
                const downloadAnchor = document.createElement('a');
                downloadAnchor.setAttribute("href", dataStr);
                downloadAnchor.setAttribute("download", "tracker_logs.json");
                document.body.appendChild(downloadAnchor);
                downloadAnchor.click();
                downloadAnchor.remove();
                alert('Логи экспортированы!');
            }

            async function logVisitor() {
                const urlParams = new URLSearchParams(window.location.search);
                const trackerId = urlParams.get('tracker');
                if (!trackerId) return;

                const timestamp = new Date().toLocaleString();
                let ipData = {};
                try {
                    const response = await fetch('https://ip-api.com/json/?fields=query,country,city');
                    ipData = await response.json();
                } catch (error) {
                    console.error('Ошибка получения IP:', error);
                }

                const logEntry = {
                    trackerId,
                    timestamp,
                    ip: ipData.query || 'Неизвестно',
                    country: ipData.country || 'Неизвестно',
                    city: ipData.city || 'Неизвестно'
                };

                trackerLogs.push(logEntry);
                localStorage.setItem('trackerLogs', JSON.stringify(trackerLogs));
                updateTrackerLogDisplay();
                document.body.innerHTML = '<h1>Спасибо за посещение!</h1>';
            }

            // Привязка событий
            createTrackerBtn.onclick = () => toggleSection('tracker');
            viewLogsBtn.onclick = () => toggleSection('logs');
            generateLinkBtn.onclick = generateTrackerLink;
            clearLogsBtn.onclick = clearTrackerLogs;
            exportLogsBtn.onclick = exportLogs;
            logFilter.onkeyup = filterLogs;

            // Инициализация
            logVisitor();
            updateTrackerLogDisplay();
        });
    </script>
</body>
</html>
